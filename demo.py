#!/usr/bin/env python3
"""
Demo script to test the chatbot functionality
"""

import os
import sys
sys.path.append('.')

from chatbot import KnowledgeBase, GeminiChatbot
from dotenv import load_dotenv

def demo():
    """Run a demo of the chatbot"""
    
    # Load environment variables
    load_dotenv()
    
    # Knowledge base data
    knowledge_data = [
        {
            "question": "‡∏†‡∏≤‡∏Ñ‡∏ß‡∏¥‡∏ä‡∏≤‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏°‡∏µ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏£‡∏≠‡∏ö‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á",
            "answer": "1. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏á (‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô)  2. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ú‡∏π‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏µ‡πÄ‡∏î‡πà‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°/‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå  3.‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ú‡∏π‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏µ‡πÄ‡∏î‡πà‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏µ‡∏¨‡∏≤/‡∏®‡∏¥‡∏•‡∏õ‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°"
        },
        {
            "question": "‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏ô‡πÑ‡∏´‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏≠‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á",
            "answer": "‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 22 ‡∏°‡∏µ.‡∏Ñ. 2568 ‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∑‡∏≠ ‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (150 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô) ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (150 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô) ‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© (100 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô) ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û (100 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)"
        },
        {
            "question": "‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ú‡∏•‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏Ñ‡∏±‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÑ‡∏´‡∏ô",
            "answer": "‡∏ú‡∏•‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô 28 ‡∏°‡∏µ.‡∏Ñ. 2568 ‡∏ú‡∏•‡∏Ñ‡∏±‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ 10 ‡πÄ‡∏°.‡∏¢. 2568 ‡∏ó‡∏µ‡πà result.kmutnb.ac.th"
        }
    ]
    
    # Get API key
    api_key = os.getenv('GEMINI_API_KEY')
    if not api_key:
        print("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö API Key")
        return
    
    try:
        # Initialize chatbot
        kb = KnowledgeBase(knowledge_data)
        chatbot = GeminiChatbot(api_key, kb)
        
        print("ü§ñ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó")
        print("=" * 50)
        
        # Test questions
        test_questions = [
            "‡∏°‡∏µ‡∏£‡∏≠‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á",
            "‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡πÑ‡∏´‡∏ô",
            "‡∏™‡∏≠‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á"
        ]
        
        for question in test_questions:
            print(f"\nüôã ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: {question}")
            response = chatbot.chat(question)
            print(f"ü§ñ ‡∏ï‡∏≠‡∏ö: {response}")
            print("-" * 50)
            
    except Exception as e:
        print(f"‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: {e}")

if __name__ == "__main__":
    demo()
