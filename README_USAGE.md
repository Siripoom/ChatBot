# ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Chatbot ‡∏£‡∏∞‡∏ö‡∏ö RAG

## üìã ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö
‚úÖ **‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô** - ‡∏£‡∏∞‡∏ö‡∏ö‡∏ñ‡∏π‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß

## üéØ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß
- ‚úÖ Vector Database (ChromaDB) - 2,377 documents
- ‚úÖ Hybrid Retrieval (BM25 + Vector Search)
- ‚úÖ Gemini API Integration
- ‚úÖ Thai Language Support (PyThaiNLP)

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Chatbot
```bash
python3 chatbot.py
```

### 2. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö
```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß
python3 quick_test.py

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
python3 test_system.py

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö hybrid retrieval
python3 test_hybrid.py
```

## üìÇ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå

### ‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å (‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
- **chatbot.py** - ‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á chatbot
- **init_vector_db.py** - ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï vector database
- **semantic_chunker.py** - ‡πÅ‡∏¢‡∏Å text ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢

### ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏î‡∏™‡∏≠‡∏ö
- **quick_test.py** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß
- **test_system.py** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
- **test_hybrid.py** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö hybrid retrieval
- **evaluate_rag.py** - ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡πâ‡∏ß‡∏¢ Ragas metrics

### ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- **data/** - ‡πÑ‡∏ü‡∏•‡πå PDF (3 ‡πÑ‡∏ü‡∏•‡πå)
- **chroma_db/** - Vector database (2,377 documents)
- **.env** - API keys ‡πÅ‡∏•‡∏∞ configuration

## üîß ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Vector Database

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå PDF ‡πÉ‡∏´‡∏°‡πà:

1. ‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå PDF ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `data/`
2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `init_vector_db.py` ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 153-157:
```python
pdf_paths = [
    "/home/siripoom/chatbot/data/‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà.pdf",
    # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
]
```
3. ‡∏£‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:
```bash
python3 init_vector_db.py
```

## üí° ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡πÑ‡∏î‡πâ

‚úÖ **‡∏ï‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏î‡∏µ:**
- "‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏µ‡πà‡∏õ‡∏µ" ‚Üí 5 ‡∏õ‡∏µ
- "‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏î‡πâ‡∏ß‡∏∏‡∏í‡∏¥‡∏≠‡∏∞‡πÑ‡∏£" ‚Üí ‡∏õ‡∏£‡∏¥‡∏ç‡∏ç‡∏≤‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡∏ö‡∏±‡∏ì‡∏ë‡∏¥‡∏ï
- "‡∏à‡∏ö‡πÑ‡∏õ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ‡∏ö‡πâ‡∏≤‡∏á" ‚Üí ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡πÉ‡∏ô‡∏™‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°

‚ö†Ô∏è **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ:**
- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏†‡∏≤‡∏Ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
- ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢/‡∏Ñ‡πà‡∏≤‡πÄ‡∏ó‡∏≠‡∏°
- ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£

## ‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏£‡∏∞‡∏ö‡∏ö

### 1. ‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `chatbot.py` ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 365:
```python
relevant_knowledge = self.knowledge_base.search_knowledge(expanded_query, n_results=10)
```

### 2. ‡∏õ‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å BM25 vs Vector
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `chatbot.py` method `search_knowledge`:
```python
def search_knowledge(self, query: str, n_results: int = 5,
                    bm25_weight: float = 0.4,  # ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å BM25
                    vector_weight: float = 0.6  # ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å Vector
                    ):
```

### 3. ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î Re-ranker
‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `chatbot.py` ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 14-15:
```python
kb = HybridKnowledgeBase(
    persist_directory="./chroma_db",
    collection_name="chatbot_knowledge",
    use_reranker=True  # True = ‡πÄ‡∏õ‡∏¥‡∏î, False = ‡∏õ‡∏¥‡∏î
)
```

## üêõ ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: "No module named 'chromadb'"
```bash
pip3 install -r requirements.txt
```

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: "GEMINI_API_KEY not found"
‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°:
```
GEMINI_API_KEY=your_api_key_here
```

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Chatbot ‡∏ï‡∏≠‡∏ö‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ vector database ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
```bash
python3 -c "import chromadb; client = chromadb.PersistentClient(path='./chroma_db'); print(client.get_collection('chatbot_knowledge').count())"
```

2. ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á vector database ‡πÉ‡∏´‡∏°‡πà:
```bash
python3 init_vector_db.py
```

## üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏∞‡∏ö‡∏ö

- **Documents:** 2,377 chunks
- **Source PDFs:** 3 files
- **Embedding Model:** paraphrase-multilingual-MiniLM-L12-v2
- **Retrieval:** Hybrid (BM25 40% + Vector 60%)
- **LLM:** Google Gemini 2.5 Flash

## üìû ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠

‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏™‡∏á‡∏™‡∏±‡∏¢ ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:
- ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå: admission.kmutnb.ac.th
- ‡πÇ‡∏ó‡∏£: 02-555-2000
